{% extends "base.html" %}
{% block title %}Доска задач{% endblock %}
{% block content %}
<div class="mx-auto w-full max-w-6xl py-10 px-2 min-h-screen">
  <h1 class="text-2xl font-bold text-blue-700 mb-8 text-center">
    {{ board.name }}
  </h1>
  <div class="overflow-x-auto md:overflow-x-visible">
    <div class="flex flex-col md:flex-row gap-4 w-full">
      {% for status, title, color in [
        ("ideas", "Идеи", "bg-purple-100"),
        ("todo", "Нужно сделать", "bg-gray-100"),
        ("wip", "В работе", "bg-yellow-100"),
        ("done", "Готово", "bg-green-100")
      ] %}
      <div class="flex-1 flex flex-col rounded-lg {{ color }} shadow-md min-w-60">
        <div class="font-semibold text-gray-700 px-4 py-3 border-b">{{ title }}</div>
        <div class="flex-1 overflow-y-auto px-4 py-2 space-y-3">
          {% for card in tasks if card.status == status %}
          <div class="rounded bg-white p-3 shadow hover:shadow-lg transition cursor-pointer flex justify-between items-center">
            <div class="font-medium text-base text-gray-800">{{ card.name }}</div>
            <div class="text-xs px-2 py-1 rounded
              {% if status == 'done' %}bg-green-100 text-green-700{% elif status == 'wip' %}bg-yellow-100 text-yellow-700{% elif status == 'ideas' %}bg-purple-200 text-purple-700{% else %}bg-red-100 text-red-700{% endif %}">
              {{ card.status }}
            </div>
          </div>
          {% else %}
          <div class="text-gray-400 text-sm">Нет задач</div>
          {% endfor %}
        </div>
        <form method="post" action="{{ url_for('board', board_id=board.id) }}" class="px-4 py-3 border-t flex gap-2">
          <input type="hidden" name="status" value="{{ status }}"/>
          <input type="text" name="name" required placeholder="Новая задача..." class="flex-1 px-2 py-1 border rounded focus:outline-none focus:ring focus:ring-blue-300"/>
          <button type="submit" class="bg-blue-600 text-white px-2 py-1 rounded hover:bg-blue-700">+</button>
        </form>
      </div>
      {% endfor %}
    </div>
  </div>
</div>
{% endblock %}
